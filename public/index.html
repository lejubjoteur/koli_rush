<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>KOLI_RUSH</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.24.0/dist/phaser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js" integrity="sha512-v8ng/uGxkge3d1IJuEo6dJP8JViyvms0cly9pnbfRxT6/31c3dRWxIiwGnMSWwZjHKOuY3EVmijs7k1jz/9bLA==" crossorigin="anonymous"></script>
    <style type="text/css">
    body {
        margin: 0;
    }
    </style>
</head>
<body>
<script type="text/javascript">

var socket = io();
var config = {
        type: Phaser.AUTO,
        width: 1028,
        height: 800,
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    
    var game = new Phaser.Game(config);
    
    function preload () {
        this.load.image('tile', '/assets/iso_2.png');
    }
    
    function create (map) {
        var tilewidth = 100;
        var tileheight = 100;
        
        tileWidthHalf = tilewidth / 2;
        tileHeightHalf = tileheight / 2;
        
        
        var mapwidth = 11;
        var mapheight = 28;
        
        var centerX = 40;
        var centerY = 100;
        
        for (var y = 0; y < mapheight; y += 1)
        {
            for (var x = 0; x < mapwidth; x += 1)
            {
                var tx = x * (tilewidth * 0.9) + tilewidth * 0.45 * (y % 2);
                var ty = y * tileHeightHalf * 0.45;
                var tile = this.add.image(centerX + tx, centerY + ty, 'tile').setScale(2);
                if (y % 2 == 0)
				tile.tint = 0xE5E3E3;
            }
        }
    }
    
    function update ()
    {
        
    }
    socket.on('mapChanged', function(map) {
         console.log('nouvel map!', map)
     })

    
</script>


</body>
</html>